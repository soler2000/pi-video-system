<!doctype html><html><head><meta name="viewport" content="width=device-width, initial-scale=1">
<title>Pi Video — Dashboard</title><link rel="stylesheet" href="/static/app.css"></head>
<body>
<div class="top">
  <a href="/" class="btn">Dashboard</a>
  <a href="/reverse" class="btn">Reversing</a>
  <a href="/settings/led" class="btn">LED Settings</a>
</div>
<div class="grid">
  <div class="card"><div class="stat" id="temp">--°C</div><div class="k">CPU Temp</div></div>
  <div class="card"><div class="stat" id="load">--%</div><div class="k">CPU</div></div>
  <div class="card"><div class="stat" id="wifi">-- dBm</div><div class="k">Wi-Fi</div></div>
  <div class="card"><div class="stat" id="batt">--%</div><div class="k">Battery</div></div>
  <div class="card"><div class="stat" id="volt">--V</div><div class="k">Voltage</div></div>
  <div class="card"><div class="stat" id="dist">-- cm</div><div class="k">Distance</div></div>
  <div class="card"><div class="stat" id="seq">--</div><div class="k">Seq</div></div>
  <div class="card"><div class="stat" id="ts">--</div><div class="k">Timestamp</div></div>
</div>
<script>
async function refresh(){
  const js = await fetch('/api/stats?t='+Date.now(), {cache:'no-store'}).then(r=>r.json()).catch(()=>({}));
  document.getElementById('temp').innerText = (js.cpu_temp??'--')+'°C';
  document.getElementById('load').innerText = Math.round(js.cpu_load||0)+'%';
  document.getElementById('wifi').innerText = (js.wifi_dbm??'--')+' dBm';
  const b = js.battery||{};
  document.getElementById('batt').innerText = (b.percent??'--')+'%';
  document.getElementById('volt').innerText = (b.voltage!=null?Number(b.voltage).toFixed(2):'--')+'V';
  document.getElementById('dist').innerText = (js.distance_cm!=null?Number(js.distance_cm).toFixed(1):'--')+' cm';
  document.getElementById('seq').innerText = js.seq ?? '--';
  document.getElementById('ts').innerText = js.ts ?? '--';
}
setInterval(refresh, 1000); refresh();
</script>
</body></html>
